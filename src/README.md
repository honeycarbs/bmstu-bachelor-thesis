## Инструкция по сборке и использованию для Александра Сергеевича <3

### Что нужно сделать до запуска программы

Поставить:

1. Docker 23.0.6
2. Docker Compose 2.17.3
3. Golang 1.20.4
4. Python 3.11

Установить на свою машину датасет [DUSHA](https://github.com/salute-developers/golos/tree/master/dusha) и выполнить инструкции по скачиванию и агрегации из репозитория.

**Обратить внимание, что wav-файлы из домена Podcast нужно отдельно достать из issue!**  
После агрегации в корень датаеста поместить скрипт `preprocess_dataset.py` и изменить в нем относительные пути, если это потребуется (не должно). Там есть комментарии на каждой строке, если что.

Запустить контейнер с базой данных:

```
docker-compose up -d
```

и создать необходимые таблицы. Скрипты для этого есть в `create-scripts.sql`.

_пользователь_: admin  
_пароль_: admin  
_база_: thesis

### Конфигурирование сервиса извлечения MFCC

В папке `feature-service` находится файл конфигурации по относительному пути `etc/config.yaml`. Подробное описание полей есть в РПЗ, но для того чтобы просто запустить достаточно поменять `dataset_path` на **путь до папки, в которой лежит файл разметки (не корень датасета, папка с файлом разметки!).**.

Все остальное можно оставить без изменений.

### Конфигурирование сервиса кластеризации

В папке `cluster-service` находится файл конфигурации по относительному пути `etc/config.yaml`. Подробное описание полей есть в РПЗ. Для того чтобы просто запустить можно ничего не менять.

### Конфигурирование сервиса создания и обучения СММ

В папке `ml-service` находится файл конфигурации по относительному пути `etc/config.yaml`. Подробное описание полей есть в РПЗ. Для того чтобы просто запустить можно ничего не менять.

### Запуск

CLI пользователю предоставлен в папке launcher. Да, CLI, потому что моя дипломная работа - это, в идеале, часть большой системы. Например, в колл-центрах часть ПО, которое записывает и анализирует звонки.

Запуск:

```
python3 main.py [РЕЖИМ] [КЛЮЧИ]
```

Режимов 3: `train` (обучение), `test` (проверка) и `recognize` (распознавание). Ключи (аргументы) для каждого режима можно псмотреть так:

```
python3 main.py [РЕЖИМ] --help
```

---

Готово! Вы восхитительны <3
